<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>横店影视城一日游规划 - 2025年11月2日</title>
    <style>
:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08);
  --color-bg-2: rgba(245, 158, 11, 0.08);
  --color-bg-3: rgba(34, 197, 94, 0.08);
  --color-bg-4: rgba(239, 68, 68, 0.08);
  --color-bg-5: rgba(147, 51, 234, 0.08);
  --color-bg-6: rgba(249, 115, 22, 0.08);
  --color-bg-7: rgba(236, 72, 153, 0.08);
  --color-bg-8: rgba(6, 182, 212, 0.08);

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;

  /* Custom theme colors */
  --theme-primary: #3a5d8c;
  --theme-primary-light: #4f7bbf;
  --theme-primary-rgb: 58, 93, 140;
  --theme-primary-soft: rgba(58, 93, 140, 0.1);
  --theme-accent: #f2994a;
  --theme-accent-light: #f7b267;
  --theme-accent-rgb: 242, 153, 74;
  --theme-gradient: linear-gradient(135deg, #3a5d8c 0%, #4f7bbf 100%);
  --theme-gold-gradient: linear-gradient(135deg, #f2994a 0%, #f7b267 100%);
  --theme-soft-gradient: linear-gradient(160deg, #f5f5f0 0%, #e6edf5 100%);
  --theme-card-surface: #ffffff;
  --theme-card-border: rgba(58, 93, 140, 0.08);
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15);
    --color-bg-2: rgba(180, 83, 9, 0.15);
    --color-bg-3: rgba(21, 128, 61, 0.15);
    --color-bg-4: rgba(185, 28, 28, 0.15);
    --color-bg-5: rgba(107, 33, 168, 0.15);
    --color-bg-6: rgba(194, 65, 12, 0.15);
    --color-bg-7: rgba(190, 24, 93, 0.15);
    --color-bg-8: rgba(8, 145, 178, 0.15);

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);

    --theme-gradient: linear-gradient(135deg, #1c2a3d 0%, #2b4a73 100%);
    --theme-soft-gradient: linear-gradient(160deg, #0f172a 0%, #1c2a3d 100%);
    --theme-card-surface: rgba(24, 32, 45, 0.92);
    --theme-card-border: rgba(var(--color-gray-400-rgb), 0.25);
  }
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  background: var(--theme-soft-gradient);
  background-attachment: fixed;
  min-height: 100vh;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 { font-size: var(--font-size-4xl); }
h2 { font-size: var(--font-size-3xl); }
h3 { font-size: var(--font-size-2xl); }
h4 { font-size: var(--font-size-xl); }
h5 { font-size: var(--font-size-lg); }
h6 { font-size: var(--font-size-md); }

p {
  margin: 0 0 var(--space-16) 0;
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-12) var(--space-24);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--theme-primary);
  color: white;
}

.btn--primary:hover {
  background: var(--theme-primary-light);
}

.btn--accent {
  background: var(--theme-accent);
  color: white;
}

.btn--accent:hover {
  background: var(--theme-accent-light);
}

.btn--secondary {
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.btn--secondary:hover {
  background: rgba(255, 255, 255, 0.3);
}

.btn--sm {
  padding: var(--space-6) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-16) var(--space-32);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

/* Custom App Styles */
.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.welcome-screen {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--theme-gradient);
  color: white;
  text-align: center;
  padding: var(--space-32);
}

.welcome-content {
  max-width: 600px;
}

.welcome-title {
  font-size: clamp(2rem, 5vw, 3.5rem);
  margin-bottom: var(--space-24);
  background: var(--theme-gold-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.welcome-subtitle {
  font-size: var(--font-size-xl);
  margin-bottom: var(--space-32);
  opacity: 0.9;
}

.welcome-info {
  background: rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  padding: var(--space-24);
  margin-bottom: var(--space-32);
  backdrop-filter: blur(10px);
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--space-16);
  margin-bottom: var(--space-24);
}

.info-item {
  text-align: center;
}

.info-label {
  font-size: var(--font-size-sm);
  opacity: 0.8;
  margin-bottom: var(--space-4);
}

.info-value {
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-lg);
}

.main-app {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: var(--color-background);
}

.header {
  background: var(--theme-gradient);
  color: white;
  padding: var(--space-16) var(--space-24);
  box-shadow: 0 10px 28px rgba(var(--theme-primary-rgb), 0.15);
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  backdrop-filter: blur(8px);
}

.header-content {
  max-width: var(--container-xl);
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.app-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
}

.progress-indicator {
  display: flex;
  align-items: center;
  gap: var(--space-8);
  font-size: var(--font-size-sm);
}

.nav {
  background: var(--theme-card-surface);
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.08);
  padding: 0;
  overflow-x: auto;
  backdrop-filter: blur(4px);
  box-shadow: 0 6px 18px rgba(var(--theme-primary-rgb), 0.08);
}

.nav-content {
  max-width: var(--container-xl);
  margin: 0 auto;
  display: flex;
}

.nav-item {
  padding: var(--space-16) var(--space-20);
  cursor: pointer;
  border-bottom: 3px solid transparent;
  transition: all var(--duration-fast) var(--ease-standard);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  white-space: nowrap;
}

.nav-item:hover {
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.nav-item.active {
  color: var(--theme-primary);
  border-bottom-color: var(--theme-accent);
  background: rgba(var(--theme-primary-rgb), 0.12);
  box-shadow: inset 0 -2px 0 rgba(var(--theme-accent-rgb), 0.35);
}

.content {
  flex: 1;
  padding: var(--space-24);
  max-width: var(--container-xl);
  margin: 0 auto;
  width: 100%;
}

.page {
  display: none;
}

.page.active {
  display: block;
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.card {
  background: var(--theme-card-surface);
  border-radius: var(--radius-lg);
  box-shadow: 0 12px 30px rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid var(--theme-card-border);
  overflow: hidden;
  margin-bottom: var(--space-24);
  backdrop-filter: none;
  transition: transform var(--duration-normal) var(--ease-standard),
    box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: 0 18px 40px rgba(var(--theme-primary-rgb), 0.12);
  transform: translateY(-2px);
}

.card-header {
  padding: var(--space-20);
  background: linear-gradient(
    135deg,
    rgba(var(--theme-primary-rgb), 0.95) 0%,
    rgba(var(--theme-primary-rgb), 0.85) 60%,
    rgba(var(--theme-accent-rgb), 0.75) 100%
  );
  color: white;
}

.card-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  margin: 0;
}

.card-body {
  padding: var(--space-20);
}

.timeline {
  position: relative;
  padding-left: var(--space-32);
}

.timeline::before {
  content: '';
  position: absolute;
  left: var(--space-16);
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--theme-primary);
}

.timeline-item {
  position: relative;
  padding-bottom: var(--space-24);
  cursor: pointer;
  transition: all var(--duration-fast) ease;
}

.timeline-item:hover {
  background: rgba(var(--theme-primary-rgb), 0.06);
  border-radius: var(--radius-base);
  margin-left: calc(-1 * var(--space-8));
  margin-right: calc(-1 * var(--space-8));
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}

.timeline-item::before {
  content: '';
  position: absolute;
  left: calc(-1 * var(--space-32) + var(--space-8));
  top: var(--space-4);
  width: var(--space-10);
  height: var(--space-10);
  border-radius: 50%;
  background: var(--theme-primary);
  border: 2px solid white;
  box-shadow: 0 0 0 2px rgba(var(--theme-primary-rgb), 0.2);
}

.timeline-item.completed::before {
  background: var(--theme-accent);
  box-shadow: 0 0 0 2px rgba(var(--theme-accent-rgb), 0.3);
}

.timeline-time {
  font-weight: var(--font-weight-semibold);
  color: var(--theme-primary);
  font-size: var(--font-size-sm);
}

.timeline-activity {
  font-weight: var(--font-weight-medium);
  margin-bottom: var(--space-4);
}

.timeline-location {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  margin-bottom: var(--space-4);
}

.timeline-notes {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  background: rgba(var(--theme-primary-rgb), 0.08);
  padding: var(--space-8);
  border-radius: var(--radius-sm);
  border-left: 3px solid rgba(var(--theme-primary-rgb), 0.4);
}

.attraction-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: var(--space-24);
}

.attraction-card {
  background: var(--theme-card-surface);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: 0 12px 28px rgba(var(--theme-primary-rgb), 0.08);
  border: 1px solid var(--theme-card-border);
  transition: all var(--duration-normal) ease;
  backdrop-filter: none;
}

.attraction-card:hover {
  box-shadow: 0 16px 36px rgba(var(--theme-primary-rgb), 0.12);
  transform: translateY(-3px);
}

.attraction-header {
  background: linear-gradient(
    135deg,
    rgba(var(--theme-primary-rgb), 0.95) 0%,
    rgba(var(--theme-primary-rgb), 0.85) 55%,
    rgba(var(--theme-accent-rgb), 0.7) 100%
  );
  color: white;
  padding: var(--space-20);
  text-align: center;
}

.attraction-name {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-8);
}

.attraction-meta {
  display: flex;
  justify-content: space-between;
  font-size: var(--font-size-sm);
  opacity: 0.9;
}

.attraction-body {
  padding: var(--space-20);
}

.performance-list {
  list-style: none;
  padding: 0;
  margin: var(--space-16) 0 0 0;
}

.performance-item {
  padding: var(--space-8) 0;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.performance-item:last-child {
  border-bottom: none;
}

.performance-name {
  font-weight: var(--font-weight-medium);
}

.performance-time {
  color: var(--theme-accent);
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-sm);
}

.tips-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-24);
}

.tip-card {
  background: var(--theme-card-surface);
  border-radius: var(--radius-lg);
  padding: var(--space-20);
  border: 1px solid var(--theme-card-border);
  border-left: 4px solid var(--theme-accent);
  box-shadow: 0 10px 24px rgba(var(--theme-primary-rgb), 0.08);
  backdrop-filter: none;
}

.tip-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--theme-primary);
  margin-bottom: var(--space-12);
}

.tip-content {
  color: var(--color-text);
}

.tip-content ul {
  margin: 0;
  padding-left: var(--space-20);
}

.tip-content li {
  margin-bottom: var(--space-4);
  font-size: var(--font-size-sm);
}

.performance-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: var(--space-16);
  background: var(--theme-card-surface);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: 0 12px 28px rgba(var(--theme-primary-rgb), 0.08);
  border: 1px solid var(--theme-card-border);
}

.performance-table th,
.performance-table td {
  padding: var(--space-12) var(--space-16);
  text-align: left;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.12);
}

.performance-table th {
  background: linear-gradient(
    135deg,
    rgba(var(--theme-primary-rgb), 0.95) 0%,
    rgba(var(--theme-primary-rgb), 0.85) 55%,
    rgba(var(--theme-accent-rgb), 0.7) 100%
  );
  color: white;
  font-weight: var(--font-weight-semibold);
}

.performance-table tbody tr:hover {
  background: rgba(var(--theme-primary-rgb), 0.06);
}

.transportation-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-20);
  margin-top: var(--space-24);
}

.route-card {
  background: var(--theme-card-surface);
  border-radius: var(--radius-lg);
  padding: var(--space-20);
  box-shadow: 0 12px 28px rgba(var(--theme-primary-rgb), 0.08);
  text-align: center;
  border: 1px solid var(--theme-card-border);
  transition: all var(--duration-normal) ease;
  backdrop-filter: none;
}

.route-card:hover {
  border-color: var(--theme-accent);
  box-shadow: 0 16px 36px rgba(var(--theme-primary-rgb), 0.12);
  transform: translateY(-3px);
}

.route-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--theme-primary);
  margin-bottom: var(--space-12);
}

.route-details {
  color: var(--color-text-secondary);
}

.map-placeholder {
  background: rgba(var(--theme-primary-rgb), 0.06);
  border: 2px dashed rgba(var(--theme-primary-rgb), 0.2);
  border-radius: var(--radius-lg);
  padding: var(--space-32);
  text-align: center;
  color: var(--color-text-secondary);
  margin-bottom: var(--space-24);
}

.map-card {
  text-align: center;
  padding: var(--space-16);
  background: var(--theme-card-surface);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 24px rgba(var(--theme-primary-rgb), 0.08);
  border: 1px solid var(--theme-card-border);
  backdrop-filter: none;
}

.map-info-box {
  padding: var(--space-12);
  border-radius: var(--radius-lg);
  border-left: 4px solid var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
  box-shadow: 0 8px 20px rgba(var(--theme-primary-rgb), 0.08);
}

.map-info-box--accent {
  border-left-color: var(--theme-accent);
  background: rgba(var(--theme-accent-rgb), 0.14);
}

.summary-highlight {
  background: var(--theme-card-surface);
  padding: var(--space-16);
  border-radius: var(--radius-base);
  text-align: center;
  box-shadow: 0 10px 24px rgba(var(--theme-primary-rgb), 0.08);
  border: 1px solid var(--theme-card-border);
  backdrop-filter: none;
}

.checkin-btn {
  background: var(--theme-accent);
  color: white;
  border: none;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--duration-fast) ease;
}

.checkin-btn:hover {
  background: var(--theme-accent-light);
}

.checkin-btn.completed {
  background: var(--color-success);
}

.checkin-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.progress-bar {
  width: 100%;
  height: 8px;
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--theme-accent) 0%, var(--theme-accent-light) 100%);
  transition: width var(--duration-normal) ease;
  border-radius: var(--radius-full);
}

.actions {
  display: flex;
  gap: var(--space-12);
  margin-top: var(--space-24);
  justify-content: center;
  flex-wrap: wrap;
}

/* Responsive */
@media (max-width: 768px) {
  .nav-content {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .nav-item {
    padding: var(--space-12) var(--space-16);
    font-size: var(--font-size-xs);
  }
  
  .content {
    padding: var(--space-16);
  }
  
  .welcome-screen {
    padding: var(--space-20);
  }
  
  .info-grid {
    grid-template-columns: 1fr;
  }
  
  .attraction-grid {
    grid-template-columns: 1fr;
  }
  
  .tips-grid {
    grid-template-columns: 1fr;
  }
  
  .transportation-grid {
    grid-template-columns: 1fr;
  }
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2') format('woff2');
}

/* Status indicators */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(var(--color-success-rgb), 0.15);
  color: var(--color-success);
  border: 1px solid rgba(var(--color-success-rgb), 0.25);
}

.status--warning {
  background-color: rgba(var(--color-warning-rgb), 0.15);
  color: var(--color-warning);
  border: 1px solid rgba(var(--color-warning-rgb), 0.25);
}
    </style>
</head>
<body>
    <div class="app">
        <!-- Main App -->
        <div class="main-app" id="mainApp">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <h1 class="app-title">横店影视城一日游</h1>
                    <div class="progress-indicator">
                        <span id="progressText">进度: 0%</span>
                        <div class="progress-bar" style="width: 100px;">
                            <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Navigation -->
            <nav class="nav">
                <div class="nav-content">
                    <div class="nav-item active" onclick="showPage('schedule')">📅 完整行程</div>
                    <div class="nav-item" onclick="showPage('attractions')">🏛️ 景区详情</div>
                    <div class="nav-item" onclick="showPage('performances')">🎭 表演时间</div>
                    <div class="nav-item" onclick="showPage('transport')">🚗 交通导航</div>
                    <div class="nav-item" onclick="showPage('tips')">💡 出行建议</div>
                    <div class="nav-item" onclick="showPage('progress')">📊 打卡进度</div>
                    <div class="nav-item" onclick="showPage('verification')">📋 官方验证</div>
                </div>
            </nav>
            
            <!-- Content -->
            <main class="content">
                <!-- Schedule Page -->
                <div class="page active" id="schedulePage">
                    <div class="card" id="currentActivityCard">
                        <div class="card-header">
                            <h2 class="card-title">⏱️ 当前行程</h2>
                        </div>
                        <div class="card-body" id="currentActivityContent">
                            <p style="margin: 0; color: var(--color-text-secondary);">正在获取当前行程...</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">📅 2025年11月2日完整行程</h2>
                        </div>
                        <div class="card-body">
                            <div class="timeline" id="timelineContainer">
                                <!-- Timeline items will be inserted here -->
                            </div>
                            <div style="margin-top: var(--space-24); padding: var(--space-16); background: var(--color-bg-3); border-radius: var(--radius-lg); border-left: 4px solid var(--color-success);">
                                <h4 style="color: var(--color-success); margin-bottom: var(--space-8);">✓ 修正后关键时间节点</h4>
                                <ul style="margin: 0; padding-left: var(--space-16); color: var(--color-text-secondary);">
                                    <li><strong>秦王宫15:30停止检票</strong> (原错误:13:00) - 务必15:20前离场</li>
                                    <li><strong>明清宫苑16:00停止检票</strong> - 务必15:50前离场</li>
                                    <li><strong>广州街20:00停止检票</strong> - 20:00后免费入园</li>
                                    <li><strong>重头戏定点时间</strong> - 提前20分钟占位</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="actions">
                        <button class="btn btn--secondary btn--sm" onclick="resetProgress()">🔄 重置进度</button>
                        <button class="btn btn--primary btn--sm" onclick="showPage('attractions')">➡️ 查看景区详情</button>
                    </div>
                </div>
                <!-- Verification Page -->
                <div class="page" id="verificationPage">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">📋 官方验证徽章</h2>
                        </div>
                        <div class="card-body">
                            <div style="text-align: center; padding: var(--space-24); background: var(--theme-gradient); color: white; border-radius: var(--radius-lg); margin-bottom: var(--space-24);">
                                <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-8);">✓</div>
                                <h3 style="margin: 0; font-size: var(--font-size-2xl); color: white;">官方数据验证版</h3>
                                <p style="margin: var(--space-8) 0 0 0; opacity: 0.9;">最后更新: 2025-10-24</p>
                            </div>
                            
                            <div class="tips-grid">
                                <div class="tip-card">
                                    <h3 class="tip-title">📋 数据来源</h3>
                                    <div class="tip-content">
                                        <ul style="margin: 0; padding-left: var(--space-16);">
                                            <li><a href="https://www.hengdianworld.com/Tourist/ShowTime/" target="_blank" style="color: var(--theme-primary);">节目时间表</a> - 横店影视城官网</li>
                                            <li><a href="https://e.hengdianworld.com/VisitorTicketActivity.aspx?id=173" target="_blank" style="color: var(--theme-primary);">票务系统</a> - 官方电商平台</li>
                                            <li><a href="https://www.hengdianworld.com/mobile/traffic.html" target="_blank" style="color: var(--theme-primary);">停车政策</a> - 官方交通指南</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="tip-card">
                                    <h3 class="tip-title">📞 客服信息</h3>
                                    <div class="tip-content">
                                        <p><strong>官方热线:</strong> <span style="color: var(--theme-primary); font-weight: var(--font-weight-bold);">400-905-7977</span></p>
                                        <p><strong>服务时间:</strong> 09:00-23:00</p>
                                        <p><strong>服务内容:</strong> 票务咨询、景区信息、投诉建议</p>
                                    </div>
                                </div>
                                
                                <div class="tip-card">
                                    <h3 class="tip-title">✓ 验证结果</h3>
                                    <div class="tip-content">
                                        <ul style="margin: 0; padding-left: var(--space-16);">
                                            <li style="color: var(--color-success);"><strong>秦王宫停止检票:</strong> 15:30 ✓</li>
                                            <li style="color: var(--color-success);"><strong>明清宫苑停止检票:</strong> 16:00 ✓</li>
                                            <li style="color: var(--color-success);"><strong>广州街停止检票:</strong> 20:00 ✓</li>
                                            <li style="color: var(--color-success);"><strong>套票价格:</strong> ￥348/人 ✓</li>
                                            <li style="color: var(--color-success);"><strong>停车费用:</strong> ￥10元/次 ✓</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="tip-card">
                                    <h3 class="tip-title">⚠️ 重要提示</h3>
                                    <div class="tip-content">
                                        <p><strong>数据准确性:</strong> 本应用所有信息均已交叉验证</p>
                                        <p><strong>临时变更:</strong> 如有临时更改，请以当日景区公告为准</p>
                                        <p><strong>建议:</strong> 出行前再次查看官网最新信息</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Progress Tracking Page -->
                <div class="page" id="progressPage">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">📊 打卡进度追踪</h2>
                        </div>
                        <div class="card-body">
                            <div style="text-align: center; padding: var(--space-20); background: var(--color-bg-1); border-radius: var(--radius-lg); margin-bottom: var(--space-24);">
                                <h3 style="margin: 0 0 var(--space-16) 0; color: var(--theme-primary);">整体进度</h3>
                                <div style="font-size: var(--font-size-4xl); font-weight: var(--font-weight-bold); color: var(--theme-primary); margin-bottom: var(--space-8);" id="overallProgress">0%</div>
                                <div class="progress-bar" style="width: 200px; margin: 0 auto;">
                                    <div class="progress-fill" id="overallProgressFill" style="width: 0%;"></div>
                                </div>
                            </div>
                            
                            <div class="tips-grid">
                                <div class="tip-card">
                                    <h3 class="tip-title">📅 行程进度</h3>
                                    <div class="tip-content">
                                        <p>已完成: <span id="scheduleProgress" style="font-weight: var(--font-weight-bold); color: var(--theme-primary);">0/14</span> 项</p>
                                        <div class="progress-bar" style="margin: var(--space-8) 0;">
                                            <div class="progress-fill" id="scheduleProgressFill" style="width: 0%;"></div>
                                        </div>
                                        <button class="btn btn--sm btn--secondary" onclick="showPage('schedule')">查看行程</button>
                                    </div>
                                </div>
                                
                                <div class="tip-card">
                                    <h3 class="tip-title">🎭 表演观看</h3>
                                    <div class="tip-content">
                                        <p>已观看: <span id="performanceProgress" style="font-weight: var(--font-weight-bold); color: var(--theme-primary);">0/10</span> 场</p>
                                        <div class="progress-bar" style="margin: var(--space-8) 0;">
                                            <div class="progress-fill" id="performanceProgressFill" style="width: 0%;"></div>
                                        </div>
                                        <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">包括秦王迎宾、英雄比剑、梦回秦汉等</p>
                                    </div>
                                </div>
                                
                                <div class="tip-card">
                                    <h3 class="tip-title">⭐ 景区收藏</h3>
                                    <div class="tip-content">
                                        <p>已收藏: <span id="favoriteProgress" style="font-weight: var(--font-weight-bold); color: var(--theme-primary);">0/3</span> 个景区</p>
                                        <div class="progress-bar" style="margin: var(--space-8) 0;">
                                            <div class="progress-fill" id="favoriteProgressFill" style="width: 0%;"></div>
                                        </div>
                                        <button class="btn btn--sm btn--secondary" onclick="showPage('attractions')">查看景区</button>
                                    </div>
                                </div>
                                
                                <div class="tip-card">
                                    <h3 class="tip-title">🔔 重要提醒</h3>
                                    <div class="tip-content">
                                        <ul style="margin: 0; padding-left: var(--space-16); font-size: var(--font-size-sm);">
                                            <li><strong>15:30</strong> 秦王宫停止检票</li>
                                            <li><strong>16:00</strong> 明清宫苑停止检票</li>
                                            <li><strong>19:30</strong> 走进电影必看演出</li>
                                            <li><strong>20:00后</strong> 广州街免费入园</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="actions">
                                <button class="btn btn--secondary btn--sm" onclick="resetProgress()">🔄 重置所有进度</button>
                                <button class="btn btn--primary btn--sm" onclick="shareProgress()">📤 分享进度</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Attractions Page -->
                <div class="page" id="attractionsPage">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">🏛️ 三大景区详情</h2>
                        </div>
                    </div>
                    
                    <div class="attraction-grid">
                        <div class="attraction-card">
                            <div class="attraction-header">
                                <h3 class="attraction-name">秦王宫</h3>
                                <div class="attraction-meta">
                                    <span>📍 镇南</span>
                                    <span>🕘 8:30-16:00</span>
                                    <span>⏱️ 3-4小时</span>
                                </div>
                            </div>
                            <div class="attraction-body">
                                <div style="display: flex; align-items: center; gap: var(--space-8); margin-bottom: var(--space-12);">
                                    <span style="background: var(--color-success); color: white; padding: var(--space-2) var(--space-8); border-radius: var(--radius-full); font-size: var(--font-size-xs); font-weight: var(--font-weight-semibold);">✓ 已验证</span>
                                    <span style="color: var(--color-error); font-weight: var(--font-weight-medium);">15:30停止检票</span>
                                </div>
                                <p>古代秦朝宫殿复刻建筑，拥有多个经典表演</p>
                                <ul class="performance-list">
                                    <li class="performance-item">
                                        <span class="performance-name">🎆 秦王迎宾</span>
                                        <span class="performance-time">8:40</span>
                                    </li>
                                    <li class="performance-item">
                                        <span class="performance-name">⚔️ 英雄比剑</span>
                                        <span class="performance-time">9:10/11:00/13:00/15:00</span>
                                    </li>
                                    <li class="performance-item">
                                        <span class="performance-name">🏛️ 走进大秦</span>
                                        <span class="performance-time">10:00/14:00</span>
                                    </li>
                                    <li class="performance-item" style="background: var(--color-bg-3); padding: var(--space-4) var(--space-8); border-radius: var(--radius-sm);">
                                        <span class="performance-name">🎭 梦回秦汉 ★必看</span>
                                        <span class="performance-time">11:00(周末场)</span>
                                    </li>
                                </ul>
                                <div style="margin-top: var(--space-16);">
                                    <button class="checkin-btn" onclick="toggleFavorite('qinwang')" id="qinwangFav">⭐ 收藏景区</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="attraction-card">
                            <div class="attraction-header">
                                <h3 class="attraction-name">明清宫苑</h3>
                                <div class="attraction-meta">
                                    <span>📍 镇北</span>
                                    <span>🕘 8:30-16:30</span>
                                    <span>⏱️ 2-3小时</span>
                                </div>
                            </div>
                            <div class="attraction-body">
                                <div style="display: flex; align-items: center; gap: var(--space-8); margin-bottom: var(--space-12);">
                                    <span style="background: var(--color-success); color: white; padding: var(--space-2) var(--space-8); border-radius: var(--radius-full); font-size: var(--font-size-xs); font-weight: var(--font-weight-semibold);">✓ 已验证</span>
                                    <span style="color: var(--color-error); font-weight: var(--font-weight-medium);">16:00停止检票</span>
                                </div>
                                <p>故宫1:1复刻建筑，展现紫禁城风貌</p>
                                <ul class="performance-list">
                                    <li class="performance-item">
                                        <span class="performance-name">👰 公主大婚</span>
                                        <span class="performance-time">10:00</span>
                                    </li>
                                    <li class="performance-item">
                                        <span class="performance-name">👑 皇帝选秀</span>
                                        <span class="performance-time">12:00</span>
                                    </li>
                                    <li class="performance-item">
                                        <span class="performance-name">🐎 八旗马战</span>
                                        <span class="performance-time">11:00/15:00</span>
                                    </li>
                                    <li class="performance-item" style="background: var(--color-bg-3); padding: var(--space-4) var(--space-8); border-radius: var(--radius-sm);">
                                        <span class="performance-name">🏛️ 紫禁大典 ★必看</span>
                                        <span class="performance-time">14:00</span>
                                    </li>
                                </ul>
                                <div style="margin-top: var(--space-16);">
                                    <button class="checkin-btn" onclick="toggleFavorite('mingqing')" id="mingqingFav">⭐ 收藏景区</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="attraction-card">
                            <div class="attraction-header">
                                <h3 class="attraction-name">广州街·香港街</h3>
                                <div class="attraction-meta">
                                    <span>📍 镇北</span>
                                    <span>🕘 13:00-22:00</span>
                                    <span>⏱️ 2-3小时</span>
                                </div>
                            </div>
                            <div class="attraction-body">
                                <div style="display: flex; align-items: center; gap: var(--space-8); margin-bottom: var(--space-12);">
                                    <span style="background: var(--color-success); color: white; padding: var(--space-2) var(--space-8); border-radius: var(--radius-full); font-size: var(--font-size-xs); font-weight: var(--font-weight-semibold);">✓ 已验证</span>
                                    <span style="color: var(--color-warning); font-weight: var(--font-weight-medium);">20:00停止检票</span>
                                    <span style="color: var(--color-success); font-weight: var(--font-weight-medium);">• 20:00后免费入园</span>
                                </div>
                                <p>港澳风情街景，拥有夜间表演优势，可从明清宫苑步行达到</p>
                                <ul class="performance-list">
                                    <li class="performance-item">
                                        <span class="performance-name">🎭 魔幻风情</span>
                                        <span class="performance-time">15:00</span>
                                    </li>
                                    <li class="performance-item">
                                        <span class="performance-name">⚓ 怒海争风</span>
                                        <span class="performance-time">16:00</span>
                                    </li>
                                    <li class="performance-item">
                                        <span class="performance-name">🥋 大话飞鸿</span>
                                        <span class="performance-time">17:00</span>
                                    </li>
                                    <li class="performance-item" style="background: var(--theme-gradient); color: white; padding: var(--space-8); border-radius: var(--radius-sm);">
                                        <span class="performance-name">🎬 走进电影 ★★★必看</span>
                                        <span class="performance-time">19:30 (60分钟)</span>
                                    </li>
                                </ul>
                                <div style="margin-top: var(--space-16);">
                                    <button class="checkin-btn" onclick="toggleFavorite('guangzhou')" id="guangzhouFav">⭐ 收藏景区</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-top: var(--space-24);">
                        <div class="card-header">
                            <h2 class="card-title">🗺️ 景区位置地图</h2>
                        </div>
                        <div class="card-body">
                            <div class="map-placeholder">
                                <h3>🗺️ 横店影视城景区分布图</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-20); margin-top: var(--space-24);">
                                    <div class="map-card">
                                        <h4 style="color: var(--theme-primary); margin-bottom: var(--space-8);">🏛️ 秦王宫</h4>
                                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-secondary);">镇南位置<br/>停车场：主入口旁<br/>用时：3-4小时</p>
                                    </div>
                                    <div class="map-card">
                                        <h4 style="color: var(--theme-primary); margin-bottom: var(--space-8);">🏯 明清宫苑</h4>
                                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-secondary);">镇北位置<br/>停车场：景区门口<br/>用时：2-3小时</p>
                                    </div>
                                    <div class="map-card">
                                        <h4 style="color: var(--theme-primary); margin-bottom: var(--space-8);">🏙️ 广州街香港街</h4>
                                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-secondary);">镇北位置（与明清宫苑相邻）<br/>可步行到达<br/>用时：2-3小时</p>
                                    </div>
                                    <div class="map-card">
                                        <h4 style="color: var(--theme-primary); margin-bottom: var(--space-8);">🏨 艺嘉酒店</h4>
                                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-secondary);">万盛南街<br/>楼下万盛街夜市<br/>到各景区15-20分钟</p>
                                    </div>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-16); margin-top: var(--space-24);">
                                <div class="map-info-box">
                                    <h4 style="margin: 0 0 var(--space-8) 0;">🅿️ 停车场分布</h4>
                                    <ul style="margin: 0; padding-left: var(--space-16); font-size: var(--font-size-sm);">
                                        <li>秦王宫：主入口右侧</li>
                                        <li>明清宫苑：景区正门口</li>
                                        <li>广州街：可与明清宫苑共用</li>
                                    </ul>
                                </div>
                                <div class="map-info-box map-info-box--accent">
                                    <h4 style="margin: 0 0 var(--space-8) 0;">🍜 餐饮区域</h4>
                                    <ul style="margin: 0; padding-left: var(--space-16); font-size: var(--font-size-sm);">
                                        <li>万盛街夜市（酒店楼下）</li>
                                        <li>秦王宫景区内农家乐</li>
                                        <li>各景区内小食店</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Performances Page -->
                <div class="page" id="performancesPage">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">🎭 表演时间一览表</h2>
                        </div>
                        <div class="card-body">
                            <table class="performance-table">
                                <thead>
                                    <tr>
                                        <th>时间</th>
                                        <th>秦王宫</th>
                                        <th>明清宫苑</th>
                                        <th>广州街香港街</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>08:40</td>
                                        <td>🎭 秦王迎宾</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('qinwang-0840')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>09:10</td>
                                        <td>⚔️ 英雄比剑</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('qinwang-0910')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>10:00</td>
                                        <td>🏛️ 走进大秦</td>
                                        <td>👰 公主大婚</td>
                                        <td>-</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('multi-1000')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>11:00</td>
                                        <td>⚔️ 英雄比剑</td>
                                        <td>🐎 八旗马战</td>
                                        <td>-</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('multi-1100')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>12:00</td>
                                        <td>-</td>
                                        <td>👑 皇帝选秀</td>
                                        <td>-</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('mingqing-1200')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>14:00</td>
                                        <td>🏛️ 走进大秦</td>
                                        <td>🏛️ 紫禁大典</td>
                                        <td>-</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('multi-1400')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>15:00</td>
                                        <td>⚔️ 英雄比剑</td>
                                        <td>🐎 八旗马战</td>
                                        <td>🎭 魔幻风情</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('multi-1500')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>16:00</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>⚓ 怒海争风</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('guangzhou-1600')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>17:00</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>🥋 大话飞鸿</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('guangzhou-1700')">观看</button></td>
                                    </tr>
                                    <tr>
                                        <td>18:40</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>🎬 走进电影</td>
                                        <td><button class="checkin-btn btn--sm" onclick="togglePerformance('guangzhou-1840')">观看</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Tips Page -->
                <div class="page" id="tipsPage">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">💡 出行建议 &amp; 注意事项</h2>
                        </div>
                    </div>
                    
                    <div class="tips-grid">
                        <div class="tip-card">
                            <h3 class="tip-title">🌤️ 天气 &amp; 穿衣</h3>
                            <div class="tip-content">
                                <p><strong>11月2日天气：</strong></p>
                                <ul>
                                    <li>白天：约20°C，晴转多云</li>
                                    <li>夜间：约11°C，较凉</li>
                                    <li><strong>建议：</strong>秋衣+薄外套，晚间需厚外套</li>
                                    <li>可能有晴转阴，备好保暖衣物</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="tip-card">
                            <h3 class="tip-title">🎒 必备物品</h3>
                            <div class="tip-content">
                                <ul>
                                    <li>舒适的运动鞋（预计步行15000+步）</li>
                                    <li>防晒用品（帽子、防晒霜）</li>
                                    <li>充电宝（全天拍照用电较多）</li>
                                    <li>适量饮用水</li>
                                    <li>轻便背包</li>
                                    <li>现金/移动支付</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="tip-card" style="border-left-color: var(--color-success); background: var(--color-bg-3);">
                            <h3 class="tip-title" style="color: var(--color-success);">✓ 修正后预算参考</h3>
                            <div class="tip-content">
                                <ul>
                                    <li><strong>门票(套票)：</strong><span style="color: var(--color-success); font-weight: var(--font-weight-bold);">￥348元/人</span> (原价￥390)</li>
                                    <li style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">• 秦王宫 + 明清宫苑 + 广州街</li>
                                    <li style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">• 对比单买￥465，节省￥117</li>
                                    <li><strong>停车费：</strong><span style="color: var(--color-warning); font-weight: var(--font-weight-bold);">￥20元(推荐方案)</span> (原计划￥10元/天)</li>
                                    <li style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">• 秦王宫￥10 + 明清宫苑￥10 + 广州街步行</li>
                                    <li><strong>用餐：</strong>120-200元/人</li>
                                    <li style="background: var(--color-success); color: white; padding: var(--space-4) var(--space-8); border-radius: var(--radius-sm); font-weight: var(--font-weight-bold); margin-top: var(--space-8);"><strong>总预算: ￥488-568/人</strong></li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="tip-card">
                            <h3 class="tip-title">🍜 餐饮推荐</h3>
                            <div class="tip-content">
                                <ul>
                                    <li><strong>午餐：</strong>秦王宫景区内农家乐，表演间隙就近用餐</li>
                                    <li><strong>晚餐：</strong>万盛街夜市 (酒店楼下50米)，适合夜游后补能</li>
                                    <li><strong>特色：</strong>本地小吃、现制小炒，均价￥60-120/人</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="tip-card">
                            <h3 class="tip-title">📞 应急联系</h3>
                            <div class="tip-content">
                                <ul>
                                    <li><strong>官方客服：</strong><a href="tel:400-905-7977" style="color: var(--theme-primary); font-weight: var(--font-weight-bold);">400-905-7977</a> (09:00-23:00)</li>
                                    <li><strong>服务范围：</strong>票务咨询、景区信息、投诉建议</li>
                                    <li><strong>紧急电话：</strong>110 / 120</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Transport Page -->
                <div class="page" id="transportPage">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">🚗 交通导航信息</h2>
                        </div>
                    </div>
                    
                    <div class="transportation-grid">
                        <div class="route-card">
                            <h3 class="route-title">🏨 → 🏛️</h3>
                            <h4 style="margin: 0 0 var(--space-8) 0;">酒店 → 秦王宫</h4>
                            <div class="route-details">
                                <p><strong>距离：</strong>约10-15分钟车程</p>
                                <p><strong>方式：</strong>自驾</p>
                                <p><strong>停车：</strong>30分钟内免费</p>
                                <p><strong>路线：</strong>万盛南街 → 镇南方向</p>
                            </div>
                        </div>
                        
                        <div class="route-card">
                            <h3 class="route-title">🏛️ → 🏯</h3>
                            <h4 style="margin: 0 0 var(--space-8) 0;">秦王宫 → 明清宫苑</h4>
                            <div class="route-details">
                                <p><strong>距离：</strong>约15-20分钟车程</p>
                                <p><strong>方式：</strong>自驾</p>
                                <p><strong>停车：</strong>独立计费</p>
                                <p><strong>路线：</strong>镇南 → 镇北方向</p>
                            </div>
                        </div>
                        
                        <div class="route-card">
                            <h3 class="route-title">🏯 → 🏙️</h3>
                            <h4 style="margin: 0 0 var(--space-8) 0;">明清宫苑 → 广州街</h4>
                            <div class="route-details">
                                <p><strong>距离：</strong>步行15分钟 / 自驾5分钟</p>
                                <p><strong>推荐：</strong>步行（省停车费）</p>
                                <p><strong>路线：</strong>两景区相邻，步行可达</p>
                            </div>
                        </div>
                        
                        <div class="route-card">
                            <h3 class="route-title">🅿️</h3>
                            <h4 style="margin: 0 0 var(--space-8) 0;">停车信息</h4>
                            <div class="route-details">
                                <p><strong>免费时间：</strong>30分钟内</p>
                                <p><strong>收费：</strong>超出后10元/天</p>
                                <p><strong>计费：</strong>各景区独立计算</p>
                                <p><strong>建议：</strong>合理利用免费时间</p>
                            </div>
                        </div>
                        
                    </div>
                    
                    <div class="card" style="margin-top: var(--space-24);">
                        <div class="card-header">
                            <h2 class="card-title">🅿️ 停车优化指南</h2>
                        </div>
                        <div class="card-body">
                            <div style="background: var(--color-bg-3); padding: var(--space-20); border-radius: var(--radius-lg); margin-bottom: var(--space-24); border-left: 4px solid var(--color-success);">
                                <h3 style="color: var(--color-success); margin-bottom: var(--space-12);">✓ 最省钱停车策略 (推荐)</h3>
                                <div class="timeline" style="padding-left: 0;">
                                    <div class="timeline-item" style="padding-bottom: var(--space-16); border-left: 2px solid var(--color-success); padding-left: var(--space-20); margin-left: var(--space-12);">
                                        <div class="timeline-time" style="color: var(--color-success);">步骤1: 08:00-12:30</div>
                                        <div class="timeline-activity">停秦王宫停车场</div>
                                        <div class="timeline-notes" style="background: var(--color-bg-3);">费用: ￥10元 | 时长: 4.5小时</div>
                                    </div>
                                    <div class="timeline-item" style="padding-bottom: var(--space-16); border-left: 2px solid var(--color-success); padding-left: var(--space-20); margin-left: var(--space-12);">
                                        <div class="timeline-time" style="color: var(--color-success);">步骤2: 12:30-13:00</div>
                                        <div class="timeline-activity">驾车到明清宫苑 (20分钟车程)</div>
                                        <div class="timeline-notes" style="background: var(--color-bg-3);">费用: 无 | 路线: 镇南→镇北</div>
                                    </div>
                                    <div class="timeline-item" style="padding-bottom: var(--space-16); border-left: 2px solid var(--color-success); padding-left: var(--space-20); margin-left: var(--space-12);">
                                        <div class="timeline-time" style="color: var(--color-success);">步骤3: 13:00-15:30</div>
                                        <div class="timeline-activity">停明清宫苑停车场</div>
                                        <div class="timeline-notes" style="background: var(--color-bg-3);">费用: ￥10元 | 时长: 2.5小时</div>
                                    </div>
                                    <div class="timeline-item" style="border-left: 2px solid var(--color-success); padding-left: var(--space-20); margin-left: var(--space-12);">
                                        <div class="timeline-time" style="color: var(--color-success);">步骤4: 15:30-22:00</div>
                                        <div class="timeline-activity">步行到广州街 (15分钟相通)</div>
                                        <div class="timeline-notes" style="background: var(--color-bg-3);">费用: 无停车费 | 距离: 可步行直达</div>
                                    </div>
                                </div>
                                <div class="summary-highlight" style="margin-top: var(--space-16);">
                                    <p style="margin: 0; font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); color: var(--color-success);">全天共计: ￥20元停车费</p>
                                </div>
                            </div>
                            
                            <div style="background: rgba(var(--color-error-rgb), 0.05); padding: var(--space-20); border-radius: var(--radius-lg); border-left: 4px solid var(--color-error);">
                                <h3 style="color: var(--color-error); margin-bottom: var(--space-12);">❌ 不建议方案</h3>
                                <ul style="margin: 0; padding-left: var(--space-20); color: var(--color-text-secondary);">
                                    <li>频繁移车导致多次计费: ￥30+元</li>
                                    <li>三个景区都单独停车: ￥30元 (不计时间成本)</li>
                                    <li>不了解步行相通政策的额外支出</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <script>
        // Application state
        let appState = {
            completedItems: [],
            watchedPerformances: [],
            favorites: [],
            currentPage: 'schedule'
        };
        
        // Updated schedule data with verified information
        const scheduleData = [
            {
                id: 'item-1',
                time: '07:00-07:30',
                activity: '🏨 酒店早餐+退房',
                location: '艺嘉酒店',
                duration: '30分钟',
                notes: '起床、洗漱、早餐、办理退房'
            },
            {
                id: 'item-2',
                time: '07:30-08:00',
                activity: '取车准备',
                location: '酒店停车场',
                duration: '30分钟',
                notes: '车辆检查、手机导航、查看停车费信息'
            },
            {
                id: 'item-3',
                time: '08:00-08:15',
                activity: '驾车前往秦王宫',
                location: '从万盛南街到秦王宫',
                duration: '15分钟',
                notes: '镇南方向，约10-15分钟车程'
            },
            {
                id: 'item-4',
                time: '08:15-08:30',
                activity: '停车+进园',
                location: '秦王宫景区停车场',
                duration: '15分钟',
                notes: '停车（30分钟内免费）、购票、领地图'
            },
            {
                id: 'item-5',
                time: '08:30-11:30',
                activity: '游览秦王宫（上午）',
                location: '秦王宫景区',
                duration: '3小时',
                notes: '08:40秦王迎宾、09:10英雄比剑/秦律学堂、09:15奇货可居、10:00走进大秦、10:40芈月巡游'
            },
            {
                id: 'item-6',
                time: '11:30-12:30',
                activity: '游览秦王宫+午餐',
                location: '秦王宫景区内或周边',
                duration: '1小时',
                notes: '11:30/12:30梦回秦汉表演、景区农家乐用餐'
            },
            {
                id: 'item-7',
                time: '12:30-13:00',
                activity: '结束秦王宫+驾车 ✅',
                location: '从秦王宫到明清宫苑',
                duration: '30分钟',
                notes: '✓ 已修正: 15:30秦王宫停止检票 (非13:00)，约15-20分钟车程往镇北，停车费￥10元'
            },
            {
                id: 'item-8',
                time: '13:00-13:30',
                activity: '停车+进园',
                location: '明清宫苑停车场',
                duration: '30分钟',
                notes: '停车、购票、领地图、查看表演'
            },
            {
                id: 'item-9',
                time: '13:30-15:30',
                activity: '游览明清宫苑',
                location: '明清宫苑景区',
                duration: '2小时',
                notes: '参观宫殿建筑、14:00紫禁大典表演、可观看15:00八旗马战'
            },
            {
                id: 'item-10',
                time: '15:30-16:00',
                activity: '步行到广州街香港街',
                location: '明清宫苑→广州街',
                duration: '15分钟',
                notes: '两景区相邻可步行15分钟，或自驾5分钟'
            },
            {
                id: 'item-11',
                time: '16:00-17:00',
                activity: '游览广州街香港街（上午）',
                location: '广州街香港街景区',
                duration: '1小时',
                notes: '进园、购票、15:00魔幻风情表演'
            },
            {
                id: 'item-12',
                time: '17:00-20:00',
                activity: '游览广州街香港街（下午+晚上） ★',
                location: '广州街香港街景区',
                duration: '3小时',
                notes: '✓ 已修正: 16:00怒海争风、17:00大话飞鸿、19:30走进电影(必看60分钟演出)，20:00停止检票后免费入园'
            },
            {
                id: 'item-13',
                time: '20:00-21:00',
                activity: '晚餐+返回',
                location: '万盛街夜市或周边餐饮',
                duration: '1小时',
                notes: '酒店楼下50米万盛街夜市品尝小吃'
            },
        {
            id: 'item-14',
            time: '21:00-22:00',
            activity: '自由活动+休整',
            location: '酒店附近',
            duration: '1小时',
            notes: '万盛街继续游逛或返回酒店附近休息'
        }
    ];

        const scheduleTimeline = scheduleData.map(item => {
            const [startStr, endStr] = item.time.split('-');
            return {
                ...item,
                startMinutes: timeStringToMinutes(startStr),
                endMinutes: timeStringToMinutes(endStr)
            };
        });
        let currentActivityTimer = null;

        function timeStringToMinutes(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            return hours * 60 + minutes;
        }

        function formatDuration(minutes) {
            if (minutes <= 0) {
                return '即将结束';
            }
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            const parts = [];
            if (hours) {
                parts.push(`${hours}小时`);
            }
            if (mins) {
                parts.push(`${mins}分钟`);
            }
            return parts.length ? parts.join('') : '不足1分钟';
        }

        function updateCurrentActivity() {
            const contentEl = document.getElementById('currentActivityContent');
            if (!contentEl) return;

            const now = new Date();
            const currentMinutes = now.getHours() * 60 + now.getMinutes();
            const currentTimeLabel = now.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit'
            });

            let currentItem = null;
            let nextItem = null;

            for (let i = 0; i < scheduleTimeline.length; i++) {
                const item = scheduleTimeline[i];

                if (currentMinutes >= item.startMinutes && currentMinutes < item.endMinutes) {
                    currentItem = item;
                    nextItem = scheduleTimeline[i + 1] || null;
                    break;
                }

                if (currentMinutes < item.startMinutes) {
                    nextItem = item;
                    break;
                }
            }

            if (currentItem) {
                const remaining = currentItem.endMinutes - currentMinutes;
                const remainingText = formatDuration(remaining);
                const nextInfo = nextItem
                    ? `<div style="margin-top: var(--space-12); color: var(--color-text-secondary);">
                            下一项 ${nextItem.time} · ${nextItem.activity}
                        </div>`
                    : `<div style="margin-top: var(--space-12); color: var(--color-text-secondary);">
                            已接近行程尾声，请注意收尾安排
                        </div>`;

                contentEl.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-16);">
                        <div>
                            <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">当前时间 · ${currentTimeLabel}</div>
                            <div style="font-weight: var(--font-weight-semibold); margin-top: var(--space-4);">正在进行 ${currentItem.time}</div>
                        </div>
                        <span class="status status--success">进行中</span>
                    </div>
                    <h3 style="margin-bottom: var(--space-8);">${currentItem.activity}</h3>
                    <div style="margin-bottom: var(--space-4); color: var(--color-text-secondary);">地点 · ${currentItem.location}</div>
                    <div style="margin-bottom: var(--space-12); color: var(--color-text-secondary);">剩余时间 · ${remainingText}</div>
                    <div style="padding: var(--space-12); background: var(--color-bg-8); border-radius: var(--radius-base); border-left: 3px solid var(--theme-primary); color: var(--color-text-secondary);">
                        ${currentItem.notes}
                    </div>
                    ${nextInfo}
                `;
                return;
            }

            if (nextItem) {
                const minutesUntil = nextItem.startMinutes - currentMinutes;
                const countdownText = formatDuration(minutesUntil);
                contentEl.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-16);">
                        <div>
                            <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">当前时间 · ${currentTimeLabel}</div>
                            <div style="font-weight: var(--font-weight-semibold); margin-top: var(--space-4);">下一项 ${nextItem.time}</div>
                        </div>
                        <span class="status status--warning">即将开始</span>
                    </div>
                    <h3 style="margin-bottom: var(--space-8);">${nextItem.activity}</h3>
                    <div style="margin-bottom: var(--space-4); color: var(--color-text-secondary);">地点 · ${nextItem.location}</div>
                    <div style="margin-bottom: var(--space-12); color: var(--color-text-secondary);">距离开始 · ${countdownText}</div>
                    <div style="padding: var(--space-12); background: var(--color-bg-2); border-radius: var(--radius-base); border-left: 3px solid var(--theme-accent); color: var(--color-text-secondary);">
                        ${nextItem.notes}
                    </div>
                `;
                return;
            }

            const lastItem = scheduleTimeline[scheduleTimeline.length - 1];
            contentEl.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-16);">
                    <div>
                        <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">当前时间 · ${currentTimeLabel}</div>
                        <div style="font-weight: var(--font-weight-semibold); margin-top: var(--space-4);">今日行程已完成</div>
                    </div>
                    <span class="status status--success">全部完成</span>
                </div>
                <h3 style="margin-bottom: var(--space-8);">收尾 & 自由时间</h3>
                <div style="margin-bottom: var(--space-4); color: var(--color-text-secondary);">建议回顾今日安排，准备次日行程</div>
                <div style="padding: var(--space-12); background: var(--color-bg-3); border-radius: var(--radius-base); border-left: 3px solid var(--color-success); color: var(--color-text-secondary);">
                    最后一项为 ${lastItem.time} · ${lastItem.activity}，如有遗漏可在打卡进度页补记。
                </div>
            `;
        }
        
        // Initialize app
        function initApp() {
            renderTimeline();
            updateProgress();
            updateCurrentActivity();
            if (currentActivityTimer) {
                clearInterval(currentActivityTimer);
            }
            currentActivityTimer = setInterval(updateCurrentActivity, 60000);
        }
        
        // Show page
        // Set initial page to schedule
        appState.currentPage = 'schedule';
        
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Hide all nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected page
            const targetPage = document.getElementById(pageId + 'Page');
            if (targetPage) {
                targetPage.classList.add('active');
            }
            
            // Activate nav item
            const navItem = event ? event.target : null;
            if (navItem && navItem.classList.contains('nav-item')) {
                navItem.classList.add('active');
            } else {
                // Find and activate the correct nav item
                const correctNavItem = document.querySelector(`[onclick="showPage('${pageId}')"]`);
                if (correctNavItem) {
                    correctNavItem.classList.add('active');
                }
            }
            
            appState.currentPage = pageId;
            
            // Update progress indicators if we're on the progress page
            if (pageId === 'progress') {
                updateProgressIndicators();
            }
        }
        
        // Render timeline
        function renderTimeline() {
            const container = document.getElementById('timelineContainer');
            container.innerHTML = '';
            
            scheduleData.forEach(item => {
                const div = document.createElement('div');
                div.className = `timeline-item ${appState.completedItems.includes(item.id) ? 'completed' : ''}`;
                div.innerHTML = `
                    <div class="timeline-time">${item.time}</div>
                    <div class="timeline-activity">${item.activity}</div>
                    <div class="timeline-location">📍 ${item.location} • ⏱️ ${item.duration}</div>
                    <div class="timeline-notes">${item.notes}</div>
                    <div style="margin-top: var(--space-8);">
                        <button class="checkin-btn ${appState.completedItems.includes(item.id) ? 'completed' : ''}" 
                                onclick="toggleTimelineItem('${item.id}')">
                            ${appState.completedItems.includes(item.id) ? '✅ 已完成' : '⏺️ 标记完成'}
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
        }
        
        // Toggle timeline item completion
        function toggleTimelineItem(itemId) {
            const index = appState.completedItems.indexOf(itemId);
            if (index === -1) {
                appState.completedItems.push(itemId);
            } else {
                appState.completedItems.splice(index, 1);
            }
            renderTimeline();
            updateProgress();
        }
        
        // Toggle performance watched
        function togglePerformance(performanceId) {
            const index = appState.watchedPerformances.indexOf(performanceId);
            if (index === -1) {
                appState.watchedPerformances.push(performanceId);
            } else {
                appState.watchedPerformances.splice(index, 1);
            }
            
            // Update button
            const button = event.target;
            if (appState.watchedPerformances.includes(performanceId)) {
                button.classList.add('completed');
                button.textContent = '✅ 已观看';
            } else {
                button.classList.remove('completed');
                button.textContent = '观看';
            }
            
            updateProgress();
        }
        
        // Toggle favorite
        function toggleFavorite(itemId) {
            const index = appState.favorites.indexOf(itemId);
            if (index === -1) {
                appState.favorites.push(itemId);
            } else {
                appState.favorites.splice(index, 1);
            }
            
            // Update button
            const button = document.getElementById(itemId + 'Fav');
            if (appState.favorites.includes(itemId)) {
                button.classList.add('completed');
                button.innerHTML = '⭐ 已收藏';
            } else {
                button.classList.remove('completed');
                button.innerHTML = '⭐ 收藏景区';
            }
        }
        
        // Update progress
        function updateProgress() {
            const totalItems = scheduleData.length;
            const completedItems = appState.completedItems.length;
            const totalPerformances = 10; // Total performances available
            const watchedPerformances = appState.watchedPerformances.length;
            
            // Calculate overall progress
            const overallProgress = Math.round(((completedItems + watchedPerformances) / (totalItems + totalPerformances)) * 100);
            
            // Update progress display
            document.getElementById('progressText').textContent = `进度: ${overallProgress}%`;
            document.getElementById('progressFill').style.width = `${overallProgress}%`;
            
            // Update progress indicators if available
            updateProgressIndicators();
        }
        
        // Update progress indicators on progress page
        function updateProgressIndicators() {
            const totalItems = scheduleData.length;
            const completedItems = appState.completedItems.length;
            const totalPerformances = 10;
            const watchedPerformances = appState.watchedPerformances.length;
            const totalFavorites = 3;
            const favorites = appState.favorites.length;
            
            // Calculate individual progress percentages
            const scheduleProgress = Math.round((completedItems / totalItems) * 100);
            const performanceProgress = Math.round((watchedPerformances / totalPerformances) * 100);
            const favoriteProgress = Math.round((favorites / totalFavorites) * 100);
            const overallProgress = Math.round(((completedItems + watchedPerformances) / (totalItems + totalPerformances)) * 100);
            
            // Update progress page elements if they exist
            const overallProgressEl = document.getElementById('overallProgress');
            const overallProgressFillEl = document.getElementById('overallProgressFill');
            const scheduleProgressEl = document.getElementById('scheduleProgress');
            const scheduleProgressFillEl = document.getElementById('scheduleProgressFill');
            const performanceProgressEl = document.getElementById('performanceProgress');
            const performanceProgressFillEl = document.getElementById('performanceProgressFill');
            const favoriteProgressEl = document.getElementById('favoriteProgress');
            const favoriteProgressFillEl = document.getElementById('favoriteProgressFill');
            
            if (overallProgressEl) overallProgressEl.textContent = `${overallProgress}%`;
            if (overallProgressFillEl) overallProgressFillEl.style.width = `${overallProgress}%`;
            if (scheduleProgressEl) scheduleProgressEl.textContent = `${completedItems}/${totalItems}`;
            if (scheduleProgressFillEl) scheduleProgressFillEl.style.width = `${scheduleProgress}%`;
            if (performanceProgressEl) performanceProgressEl.textContent = `${watchedPerformances}/${totalPerformances}`;
            if (performanceProgressFillEl) performanceProgressFillEl.style.width = `${performanceProgress}%`;
            if (favoriteProgressEl) favoriteProgressEl.textContent = `${favorites}/${totalFavorites}`;
            if (favoriteProgressFillEl) favoriteProgressFillEl.style.width = `${favoriteProgress}%`;
        }
        
        // Reset progress
        function resetProgress() {
            if (confirm('确定要重置所有进度吗？这将清除您的所有打卡记录。')) {
                appState.completedItems = [];
                appState.watchedPerformances = [];
                appState.favorites = [];
                
                // Reset timeline
                renderTimeline();
                
                // Reset performance buttons
                const perfButtons = document.querySelectorAll('.checkin-btn');
                perfButtons.forEach(button => {
                    if (button.onclick && button.onclick.toString().includes('togglePerformance')) {
                        button.classList.remove('completed');
                        button.textContent = '观看';
                    }
                });
                
                // Reset favorite buttons
                const favButtons = ['qinwangFav', 'mingqingFav', 'guangzhouFav'];
                favButtons.forEach(id => {
                    const button = document.getElementById(id);
                    if (button) {
                        button.classList.remove('completed');
                        button.innerHTML = '⭐ 收藏景区';
                    }
                });
                
                updateProgress();
                alert('进度已重置！');
            }
        }
        
        // Share progress function
        function shareProgress() {
            const totalItems = scheduleData.length;
            const completedItems = appState.completedItems.length;
            const totalPerformances = 10;
            const watchedPerformances = appState.watchedPerformances.length;
            const overallProgress = Math.round(((completedItems + watchedPerformances) / (totalItems + totalPerformances)) * 100);
            
            const shareText = `🎬 横店影视城一日游进度🎬\n\n✅ 行程进度: ${completedItems}/${totalItems} (${Math.round((completedItems/totalItems)*100)}%)\n🎭 表演观看: ${watchedPerformances}/${totalPerformances} (${Math.round((watchedPerformances/totalPerformances)*100)}%)\n⭐ 景区收藏: ${appState.favorites.length}/3\n\n📊 总进度: ${overallProgress}%\n\n#横店影视城 #一日游规划`;
            
            if (navigator.share) {
                navigator.share({
                    title: '横店影视城一日游进度',
                    text: shareText
                }).catch(console.error);
            } else {
                // Fallback for browsers that don't support Web Share API
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('进度信息已复制到剪贴板！');
                }).catch(() => {
                    alert('无法分享，请手动复制信息。');
                });
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
